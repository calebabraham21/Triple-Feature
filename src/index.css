@import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Inter:wght@300;400;500;600;700&display=swap');
@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  body {
    @apply bg-cinema-black text-white font-sans;
    font-feature-settings: "rlig" 1, "calt" 1;
  }
}

@layer components {
  /* Shimmer animation for skeleton loading */
  @keyframes shimmer {
    0% {
      transform: translateX(-100%);
    }
    100% {
      transform: translateX(100%);
    }
  }
  
  /* 4-span snake outline effect: fast, clean, no scale/color change */
  .trace-snake {
    position: relative;
    overflow: hidden;
    isolation: isolate;
  }
  .trace-snake .trace-line {
    position: absolute;
    display: block;
    pointer-events: none;
    background: currentColor;
  }
  /* top */
  .trace-snake .trace-line--t {
    top: 0;
    left: 0;
    width: 100%;
    height: 2px;
    background: linear-gradient(90deg, transparent, currentColor);
    transform: translateX(-115%);
    transition: transform 0.35s linear;
  }
  .trace-snake:hover .trace-line--t { transform: translateX(100%); transition-delay: 0s; }
  /* right */
  .trace-snake .trace-line--r {
    top: 0;
    right: 0;
    width: 2px;
    height: 100%;
    background: linear-gradient(180deg, transparent, currentColor);
    transform: translateY(-130%);
    transition: transform 0.35s linear 0.08s;
  }
  .trace-snake:hover .trace-line--r { transform: translateY(100%); }
  /* bottom */
  .trace-snake .trace-line--b {
    bottom: 0;
    left: 0;
    width: 100%;
    height: 2px;
    background: linear-gradient(270deg, transparent, currentColor);
    transform: translateX(100%);
    transition: transform 0.35s linear 0.17s;
  }
  .trace-snake:hover .trace-line--b { transform: translateX(-115%); }
  /* left */
  .trace-snake .trace-line--l {
    top: 0;
    left: 0;
    width: 2px;
    height: 100%;
    background: linear-gradient(360deg, transparent, currentColor);
    transform: translateY(130%);
    transition: transform 0.35s linear 0.25s;
  }
  .trace-snake:hover .trace-line--l { transform: translateY(-130%); }

  /* Persistent hover feedback: subtle inner outline and soft shadow */
  .trace-snake:hover {
    box-shadow:
      0 0 0 2px rgba(255,255,255,0.12) inset,
      0 4px 10px rgba(0,0,0,0.25);
  }
  /* Snake-outline: fast, clean animated outline on hover */
  .snake-outline,
  .neon-trace,
  .btn-primary,
  .btn-secondary,
  .snake-hover {
    position: relative;
    overflow: hidden;
    isolation: isolate; /* ensure local stacking context */
  }
  .snake-outline::after,
  .neon-trace::after,
  .btn-primary::after,
  .btn-secondary::after,
  .trace-snake--rb::after {
    content: "";
    position: absolute;
    inset: 0;
    border-radius: inherit; /* follow the element's rounding */
    pointer-events: none;
    z-index: 1;
  }
  /* Animated stroke mask */
  .snake-outline::after,
  .neon-trace::after,
  .btn-primary::after,
  .btn-secondary::after {
    --snake-color: currentColor;
    background: conic-gradient(
      from var(--angle, 0deg),
      transparent 0deg 300deg,
      #4a9eff 300deg 320deg,
      #ff4444 320deg 340deg,
      transparent 340deg 360deg
    );
    border-radius: inherit;
    /* Reveal only a thin ring */
    -webkit-mask: radial-gradient(farthest-side, transparent calc(100% - 2px), #fff 0);
            mask: radial-gradient(farthest-side, transparent calc(100% - 2px), #fff 0);
    opacity: 0;
    transition: opacity 120ms ease;
  }

  @keyframes snake {
    from { --angle: 0deg; }
    to { --angle: 360deg; }
  }

  /* SVG-based snake border (robust across browsers) */
  .snake-border {
    stroke-dasharray: 100;
    stroke-dashoffset: 100;
    opacity: 0;
    transition: stroke-dashoffset 350ms linear, opacity 180ms ease;
  }
  .snake-hover:hover .snake-border {
    stroke-dashoffset: 0;
    opacity: 1;
  }

  .snake-outline:hover::after,
  .neon-trace:hover::after,
  .btn-primary:hover::after,
  .btn-secondary:hover::after {
    opacity: 1;
    animation: snake 0.35s linear forwards;
  }
  .btn-primary {
    @apply text-white font-semibold py-3 px-6 rounded-lg border;
    background-color: #1a1a1a; /* cinema-dark */
    border-color: #2a2a2a; /* cinema-gray */
  }
  
  .btn-secondary {
    @apply bg-cinema-gray text-white font-medium py-2 px-4 rounded-lg border border-cinema-light;
  }
  
  .card {
    @apply bg-cinema-dark rounded-xl p-6 border border-cinema-gray 
           hover:border-accent-blue transition-all duration-300 transform hover:scale-105 
           shadow-lg hover:shadow-2xl;
  }
  
  .movie-card {
    @apply bg-cinema-dark rounded-xl overflow-hidden border border-cinema-gray 
           transition-all duration-300 transform hover:scale-105 
           shadow-lg hover:shadow-2xl;
    position: relative;
    isolation: isolate;
  }
  /* Gradient border on hover (purple -> blue -> red) */
  .movie-card::after {
    content: "";
    position: absolute;
    inset: 0;
    border-radius: inherit;
    padding: 1px; /* border thickness */
    background: linear-gradient(135deg, #8b5cf6, #4a9eff, #ff4444);
    -webkit-mask: 
      linear-gradient(#000 0 0) content-box, 
      linear-gradient(#000 0 0);
            mask: 
      linear-gradient(#000 0 0) content-box, 
      linear-gradient(#000 0 0);
    -webkit-mask-composite: xor;
            mask-composite: exclude;
    opacity: 0;
    transition: opacity 200ms ease;
    pointer-events: none;
  }
  .movie-card:hover::after { opacity: 1; }
  
  .glass-effect {
    @apply bg-white/10 backdrop-blur-md border border-white/20;
  }
  
  .text-glow {
    text-shadow: 0 0 10px currentColor;
  }
  
  .cinema-gradient {
    background: linear-gradient(135deg, #0a0a0a 0%, #1a1a1a 50%, #2a2a2a 100%);
  }
  /* Site-wide page background (behind nav and all content) */
  .app-gradient {
    background: 
      radial-gradient(1200px 700px at 80% -150px, rgba(74,158,255,0.18), transparent 65%),
      radial-gradient(900px 600px at 12% 110%, rgba(74,158,255,0.12), transparent 70%),
      linear-gradient(180deg, #0a0a0a 0%, #0e1218 50%, #0b0f16 100%);
  }
  
  .accent-gradient {
    background: linear-gradient(135deg, #ff4444 0%, #8b5cf6 50%, #4a9eff 100%);
  }

  /* Vertical gradient rails (left and right outlines only) */
  .side-rails {
    position: relative;
  }
  .side-rails::before,
  .side-rails::after {
    content: "";
    position: absolute;
    top: 8px;
    bottom: 8px;
    width: 2px;
    pointer-events: none;
    /* Fade to transparent at the top and bottom tips */
    background: linear-gradient(
      180deg,
      rgba(139, 92, 246, 0) 0%,
      rgba(139, 92, 246, 0.28) 15%,
      rgba(74, 158, 255, 0.28) 85%,
      rgba(74, 158, 255, 0) 100%
    );
    border-radius: 1px;
  }
  .side-rails::before { left: -1px; }
  .side-rails::after { right: -1px; }

  /* Main content spacing to prevent nav overlap */
  main {
    padding-top: var(--nav-height, 80px);
  }

  /* Smooth gradient animation for buttons */
  .gradient-button {
    background: linear-gradient(90deg, 
      rgba(255, 68, 68, 0.3) 0%, 
      rgba(139, 92, 246, 0.3) 50%, 
      rgba(74, 158, 255, 0.3) 100%);
    background-size: 200% 100%;
    transition: background-position 0.5s ease;
  }
  
  .gradient-button:hover {
    background-position: 100% 0;
  }

  /* Dynamic spotlight effect */
  .spotlight-button {
    position: relative;
    overflow: hidden;
  }
  
  .spotlight-button::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: radial-gradient(ellipse 80px 40px at var(--x, 50%) var(--y, 50%), 
      rgba(255, 68, 68, 0.05) 0%, 
      rgba(74, 158, 255, 0.05) 50%, 
      transparent 100%);
    opacity: 0;
    transition: opacity 0.3s ease;
    pointer-events: none;
    z-index: 1;
  }
  
  .spotlight-button:hover::before {
    opacity: 1;
  }
  
  .spotlight-button > * {
    position: relative;
    z-index: 2;
  }

  /* Ultra-smooth indeterminate progress bar (GPU-accelerated) */
  @keyframes indeterminate-x {
    0% { transform: translate3d(-100%, 0, 0); }
    100% { transform: translate3d(100%, 0, 0); }
  }
  .indeterminate-bar {
    animation: indeterminate-x 1.1s linear infinite;
    will-change: transform;
  }

  /* Line clamp utilities for text truncation */
  .line-clamp-1 {
    overflow: hidden;
    display: -webkit-box;
    -webkit-box-orient: vertical;
    -webkit-line-clamp: 1;
  }
  
  .line-clamp-2 {
    overflow: hidden;
    display: -webkit-box;
    -webkit-box-orient: vertical;
    -webkit-line-clamp: 2;
  }
  
  .line-clamp-3 {
    overflow: hidden;
    display: -webkit-box;
    -webkit-box-orient: vertical;
    -webkit-line-clamp: 3;
  }
  
  .line-clamp-none {
    overflow: visible;
    display: block;
    -webkit-box-orient: unset;
    -webkit-line-clamp: unset;
  }
}
